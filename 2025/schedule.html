<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sketch Your Mind Conference</title>
    <script src='assets/rrule.min.js'></script>
    <script src='assets/fc.index.global.min.js'></script>   
    <script src='assets/rrule.connector.min.js'></script>
    <script src='assets/luxon.min.js'></script>
    <link href="style.css" rel="stylesheet">
</head>
<body>
  <div style="max-width: 950px; margin: 40px auto 0 auto; padding: 0;">
    <img src="assets/banner-conference.png" alt="Sketch Your Mind Conference" style="display:block;max-width:900px;width:100%;margin:0 auto 24px auto;border-radius:14px;box-shadow:0 2px 16px rgba(0,0,0,0.18);">
    <div id="calendar"></div>
    <div id="info-message"></div>
  </div>

  <script>
    const CONFERENCE_START = new Date("2025-10-13T17:00:00+02:00");
 
  const year   = CONFERENCE_START.getUTCFullYear();
  const month  = CONFERENCE_START.getUTCMonth();      // 0-based (0=Jan)
  const day    = CONFERENCE_START.getUTCDate();
  const hour   = CONFERENCE_START.getUTCHours();
  const minute = CONFERENCE_START.getUTCMinutes();
    

    function addDays(date, days) {
        const newDate = new Date(date);
        newDate.setDate(newDate.getDate() + days);
        return newDate;
    }

    function addHours(date, hours, minutes) {
        const newDate = new Date(date);
        newDate.setHours(newDate.getHours() + hours);
        newDate.setMinutes(newDate.getMinutes() + (minutes || 0));
        return newDate;
    }

    function dateToString(date) {
        const year = date.getFullYear();
        const month = String(date.getMonth() + 1).padStart(2, '0');
        const day = String(date.getDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    }

      const SESSIONS = {
          0: {
              "1": { title: "Visual Thinking Basics", presenter: "Alice Johnson"},
              "2": { title: "Mind Mapping Techniques", presenter: "Bob Smith" },
              "3": { title: "Creative Workflows", presenter: "Carol Lee" }
          },
          1: {
              "1": { title: "Sketchnoting 101", presenter: "David Brown" },
              "2": { title: "Spatial Note-Taking", presenter: "Eve White" },
              "3": { title: "Teaching with Visuals", presenter: "Frank Green" }
          },
          2: {
              "1": { title: "Concept Mapping", presenter: "Grace Black" },
              "2": { title: "Procreate for PKM", presenter: "Hank Blue" },
              "3": { title: "Visual PKM Tools", presenter: "Ivy Gray" }
          },
          3: {
              "1": { title: "Excalidraw Tips", presenter: "Jack Red" },
              "2": { title: "Notion for Visuals", presenter: "Karen Yellow" },
              "3": { title: "Scrintal Workflows", presenter: "Liam Purple" }
          },
          4: {
              "1": { title: "TLDraw for Teams", presenter: "Mia Orange" },
              "2": { title: "Napkin for Ideas", presenter: "Noah Pink" },
              "3": { title: "YouTube for Visuals", presenter: "Olivia Cyan" }
          }
      };

      document.addEventListener('DOMContentLoaded', function() {
          var calendarEl = document.getElementById('calendar');
          var events = [];

          // For each day, add 3 sessions only (no breaks)
          for (let day in SESSIONS) {
              // Session 1: 16:00–17:00 UTC
              const confDay = addDays(CONFERENCE_START, parseInt(day, 10));
              events.push({
                  title: `${SESSIONS[day]["1"].title} - ${SESSIONS[day]["1"].presenter}`,
                  start: confDay,
                  end: addHours(confDay, 1, 0)
              });
              // Session 2: 17:30–18:30 UTC
              events.push({
                  title: `${SESSIONS[day]["2"].title} - ${SESSIONS[day]["2"].presenter}`,
                  start: addHours(confDay, 1, 30),
                  end: addHours(confDay, 2, 30)
              });
              // Session 3: 19:00–20:00 UTC
              events.push({
                  title: `${SESSIONS[day]["3"].title} - ${SESSIONS[day]["3"].presenter}`,
                  start: addHours(confDay, 3, 0),
                  end: addHours(confDay, 4, 0)
              });
          }

          // Calculate local slotMinTime and slotMaxTime based on UTC session times
          // First session starts at 16:00 UTC, last session ends at 20:00 UTC
          const localStart = luxon.DateTime.fromObject(
              { year, month, day, hour, minute },
              { zone: 'utc' }
          ).setZone(luxon.DateTime.local().zoneName);
          const localEnd = luxon.DateTime.fromObject(
              { year, month, day, hour: hour+4, minute},
              { zone: 'utc' }
          ).setZone(luxon.DateTime.local().zoneName);

          var calendar = new FullCalendar.Calendar(calendarEl, {
              initialView: 'timeGridWeek',
              contentHeight: 'auto',
              timeZone: 'local',
              displayEventTime: true,
              events: events,
              visibleRange: {
                  start: dateToString(CONFERENCE_START),
                  end: dateToString(addDays(CONFERENCE_START, 5))
              },
              hiddenDays: [0, 6],
              allDaySlot: false,
              slotEventOverlap: false,
              slotMinTime: localStart.toFormat('HH:mm:ss'),
              slotMaxTime: localEnd.toFormat('HH:mm:ss'),
              initialDate: dateToString(CONFERENCE_START),
              eventDidMount: function(info) {
                  // Only render session events (no breaks)
                  const parts = info.event.title.split(' - ');
                  info.el.innerHTML = `
                      <div class="fc-event-time">${info.timeText}</div>
                      <div class="session-event">
                          <div class="session-title">${parts[0]}</div>
                          <div class="session-presenter">${parts[1]}</div>
                      </div>
                  `;
              },
              headerToolbar: {
                  start: '',
                  center: 'title',
                  end: ''
              },
              titleFormat: { year: 'numeric', month: 'long', day: 'numeric' },
              datesSet: function(dateInfo) {
                  var titleElement = document.querySelector('.fc-toolbar-title');
                  titleElement.innerText = `Schedule`;
              }
          });

          calendar.render();
          let localTimeZone = luxon.DateTime.local().zoneName;
          let timeZoneMessage = `Times are displayed in ${localTimeZone} timezone.<br>Sessions are 1 hour long with 30-minute breaks between.`;
          document.getElementById('info-message').innerHTML = timeZoneMessage;
      });
  </script>
</body>
</html>
